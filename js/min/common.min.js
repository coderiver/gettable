$(document).ready(function(){function i(){$(".js-tab").each(function(){var i=$(this).find("a"),s=$(this).parents(".js-tab-group").find(".js-tab-cont");s.hide();var t=$(this).find(".is-active").attr("href");$("."+t).show(),i.on("click",function(){var t=$(this).attr("href");return i.removeClass("is-active"),$(this).addClass("is-active"),s.hide(),$(this).parents(".js-tab-group").find("."+t).show(),!1})})}function s(){var i=o.offset().top-18,s=$(document).scrollTop(),t=d.outerHeight();if(s>=i){if($("body").addClass("is-fixed-sidebar"),t>=$(window).height()&&(o.find(".sidebar__wrap").css({maxHeight:$(window).height()-80}),d.css({maxHeight:$(window).height()-36})),t<$(window).height()&&(o.find(".sidebar__wrap").css({maxHeight:"auto"}),d.css({maxHeight:"auto"})),$(".js-item").length)var e=$(".js-item").offset().top+$(".js-item").outerHeight();var a=$(".sidebar-target").offset().top+t;a>=e?($("body").addClass("is-abs-sidebar"),$("body").removeClass("is-fixed-sidebar")):e>a&&($("body").removeClass("is-abs-sidebar"),$("body").addClass("is-fixed-sidebar"))}else $("body").removeClass("is-fixed-sidebar")}function t(){var i=r.offset().top,s=$(document).scrollTop(),t=c.outerHeight();if(s>=i){$("body").addClass("is-fixed-sidebar"),t>=$(window).height()&&(r.find(".scroll-pane").css({maxHeight:$(window).height()-80}),c.css({maxHeight:$(window).height()-36})),t<$(window).height()&&(r.find(".scroll-pane").css({maxHeight:"auto"}),c.css({maxHeight:"auto"}));var e=$(".page-footer").offset().top,a=$(".sidebar-target").offset().top+t;console.log("target"+a),console.log("item"+e),a>=e?($("body").addClass("is-abs-sidebar"),$("body").removeClass("is-fixed-sidebar")):e>a&&($("body").removeClass("is-abs-sidebar"),$("body").addClass("is-fixed-sidebar"))}else $("body").removeClass("is-fixed-sidebar")}function e(){if($("body").find(".js-window-key.js-active").length){var i=$("body").find(".js-window-key.js-active"),s=i.attr("href"),t=$("body").find("."+s).outerHeight(),e=i.offset().top-t/2+10;$("body").find("."+s).css({top:e})}}function a(){var i=$(window).height()-$(".page-header").outerHeight();$(".js-map-height").css({height:i})}$(document).click(function(){n.fadeOut("fast"),l.fadeOut("fast"),h.fadeOut("fast"),$(".js-popup-link").removeClass("is-active")});var n=$(".js-window");$(".js-slider").on("cycle-before",function(){$(this).find(".is-inactive").removeClass("is-inactive"),$(this).find(".is-active").addClass("is-inactive")}),$(".js-place-slider .cycle-slide-active").next().next().addClass("is-current"),$(".js-place-slider").on("cycle-next",function(){$(this).find(".is-current").removeClass("is-current"),$(this).find(".cycle-slide-active").next().next().next().addClass("is-current"),$(this).find(".is-active").addClass("is-inactive")}),$(".js-place-slider").on("cycle-prev",function(){$(this).find(".is-current").removeClass("is-current"),$(this).find(".cycle-slide-active").next().addClass("is-current"),$(this).find(".is-active").addClass("is-inactive")}),i(),$(".js-input-tel").length&&$(".js-input-tel").mask("+9(999) 999-99-99"),$(".js-login-link").on("click",function(){$(".js-login-box").slideToggle("fast"),$(this).toggleClass("is-active")}),$(".js-close-login").on("click",function(){$(".js-login-box").slideUp("fast"),$(".js-login-link").removeClass("is-active")}),$(".js-clear-input").on("click",function(){$(this).fadeOut("fast"),$(this).parent().find("input").val("")}),$(".js-item-action").hover(function(){$(this).parents(".item").find(".item__action-info").fadeIn()},function(){$(this).parents(".item").find(".item__action-info").fadeOut()}),$(".js-item-key").on("click",function(){return $(this).parents(".item").addClass("is-active"),!1}),$(".js-hide-info").on("click",function(){return $(this).parents(".item").removeClass("is-active"),!1});var o=$(".js-sidebar"),d=o.find(".sidebar__in");o.length&&s();var r=$(".js-card"),c=$(".js-card__in");r.length&&t(),$(window).scroll(function(){o.length&&s(),r.length&&t(),e()}),$(window).resize(function(){o.length&&s()}),$("body").prepend('<div class="tip js-tip"><div class="tip__in"></div></div>');var f=$(".js-tip");$(".js-tip-key").hover(function(){var i=$(this).offset().left,s=$(this).offset().top,t=$(this).attr("data-title");f.find(".tip__in").html(t);var e=f.outerHeight();f.fadeIn("fast"),f.css({left:i+60,top:s-e/2+10})},function(){f.hide()}),f.hover(function(){f.show()},function(){f.hide()}),$(".js-close-window").on("click",function(){$(this).parents(".window").fadeOut("fast").removeAttr("data-id"),$(".js-window-key").removeClass("js-active")}),n.on("click",function(i){i.stopPropagation()}),$(".js-window-key").on("click",function(i){n.hide(),$(".js-window-key").removeClass("js-active"),$(this).addClass("js-active");var s=$(this).attr("href"),t=$("."+s).outerHeight(),e=$(this).offset().top-t/2+$(this).outerHeight()/2,a=$(this).offset().left+$(this).outerWidth();return $("."+s).fadeIn("fast"),$("."+s).attr("data-id",s),$("."+s).css({top:e,left:a}),i.stopPropagation(),!1}),a(),$(window).resize(function(){a()});var l=$(".popup"),h=$(".js-overlay");$(".js-popup-link").on("click",function(i){$(".window_bottom").fadeOut();var s=$(this).attr("href");return $(".js-popup-link").removeClass("is-active"),$(this).addClass("is-active"),$("."+s).fadeIn(),$(h).fadeIn(),!1}),l.on("click",function(i){i.stopPropagation()}),$(".js-popup-close").on("click",function(){l.fadeOut("fast"),h.fadeOut("fast"),$(".window_bottom").fadeOut(),$(".js-popup-link").removeClass("is-active")}),$(".scroll-pane").bind("mousewheel",function(i){return i.originalEvent.wheelDelta<0&&$(this).scrollTop()+$(this).height()>=this.scrollHeight?!1:void 0}),$(".js-load-more").on("click",function(){return $(this).addClass("is-active"),!1})});