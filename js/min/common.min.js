$(document).ready(function(){function i(){$(".js-tab").each(function(){var i=$(this).find("a"),t=$(this).parents(".js-tab-group").find(".js-tab-cont");t.hide();var s=$(this).find(".is-active").attr("href");$("."+s).show(),i.on("click",function(){var s=$(this).attr("href");return i.removeClass("is-active"),$(this).addClass("is-active"),t.hide(),$(this).parents(".js-tab-group").find("."+s).show(),!1})})}function t(){var i=n.offset().top-18,t=$(document).scrollTop(),s=d.outerHeight();if(t>=i){if($("body").addClass("is-fixed-sidebar"),s>=$(window).height()&&(n.find(".sidebar__wrap").css({maxHeight:$(window).height()-80}),d.css({maxHeight:$(window).height()-36})),s<$(window).height()&&(n.find(".sidebar__wrap").css({maxHeight:"auto"}),d.css({maxHeight:"auto"})),$(".js-item").length)var e=$(".js-item").offset().top+$(".js-item").outerHeight();var a=$(".sidebar-target").offset().top+s;a>=e?($("body").addClass("is-abs-sidebar"),$("body").removeClass("is-fixed-sidebar")):e>a&&($("body").removeClass("is-abs-sidebar"),$("body").addClass("is-fixed-sidebar"))}else $("body").removeClass("is-fixed-sidebar")}function s(){var i=r.offset().top,t=$(document).scrollTop(),s=c.outerHeight();if(t>=i){$("body").addClass("is-fixed-sidebar"),s>=$(window).height()&&(r.find(".scroll-pane").css({maxHeight:$(window).height()-80}),c.css({maxHeight:$(window).height()-36})),s<$(window).height()&&(r.find(".scroll-pane").css({maxHeight:"auto"}),c.css({maxHeight:"auto"}));var e=$(".page-footer").offset().top,a=$(".sidebar-target").offset().top+s;console.log("target"+a),console.log("item"+e),a>=e?($("body").addClass("is-abs-sidebar"),$("body").removeClass("is-fixed-sidebar")):e>a&&($("body").removeClass("is-abs-sidebar"),$("body").addClass("is-fixed-sidebar"))}else $("body").removeClass("is-fixed-sidebar")}function e(){if($("body").find(".js-window-key.js-active").length){var i=$("body").find(".js-window-key.js-active"),t=i.attr("href"),s=$("body").find("."+t).outerHeight(),e=i.offset().top-s/2+10;$("body").find("."+t).css({top:e})}}function a(){var i=$(window).height()-$(".page-header").outerHeight();$(".js-map-height").css({height:i})}$(document).click(function(){o.fadeOut("fast"),f.fadeOut("fast"),h.fadeOut("fast"),$(".js-popup-link").removeClass("is-active")});var o=$(".js-window");$(".js-slider").on("cycle-before",function(){$(this).find(".is-inactive").removeClass("is-inactive"),$(this).find(".is-active").addClass("is-inactive")}),$(".js-place-slider .cycle-slide-active").next().next().addClass("is-current"),$(".js-place-slider").on("cycle-next",function(){$(this).find(".is-current").removeClass("is-current"),$(this).find(".cycle-slide-active").next().next().next().addClass("is-current"),$(this).find(".is-active").addClass("is-inactive")}),$(".js-place-slider").on("cycle-prev",function(){$(this).find(".is-current").removeClass("is-current"),$(this).find(".cycle-slide-active").next().addClass("is-current"),$(this).find(".is-active").addClass("is-inactive")}),i(),$(".js-input-tel").length&&$(".js-input-tel").mask("+9(999) 999-99-99"),$(".js-login-link").on("click",function(){$(".js-login-box").slideToggle("fast"),$(this).toggleClass("is-active")}),$(".js-close-login").on("click",function(){$(".js-login-box").slideUp("fast"),$(".js-login-link").removeClass("is-active")}),$(".js-clear-input").on("click",function(){$(this).fadeOut("fast"),$(this).parent().find("input").val("")}),$(".js-item-action").hover(function(){$(this).parents(".item").find(".item__action-info").fadeIn()},function(){$(this).parents(".item").find(".item__action-info").fadeOut()}),$(".js-item-key").on("click",function(){return $(this).parents(".item").addClass("is-active"),!1}),$(".js-hide-info").on("click",function(){return $(this).parents(".item").removeClass("is-active"),!1});var n=$(".js-sidebar"),d=n.find(".sidebar__in");n.length&&t();var r=$(".js-card"),c=$(".js-card__in");r.length&&s(),$(window).scroll(function(){n.length&&t(),r.length&&s(),e()}),$(window).resize(function(){n.length&&t()}),$("body").prepend('<div class="tip js-tip"><div class="tip__in"></div></div>');var l=$(".js-tip");$(".js-tip-key").hover(function(){var i=$(this).offset().left,t=$(this).offset().top,s=$(this).attr("data-title");l.find(".tip__in").html(s);var e=l.outerHeight();l.fadeIn("fast"),l.css({left:i+60,top:t-e/2+10})},function(){l.hide()}),l.hover(function(){l.show()},function(){l.hide()}),$(".js-close-window").on("click",function(){$(this).parents(".window").fadeOut("fast").removeAttr("data-id"),$(".js-window-key").removeClass("js-active")}),o.on("click",function(i){i.stopPropagation()}),$(".js-window-key").on("click",function(i){o.hide(),$(".js-window-key").removeClass("js-active"),$(this).addClass("js-active");var t=$(this).attr("href"),s=$("."+t).outerHeight(),e=$(this).offset().top-s/2+$(this).outerHeight()/2,a=$(this).offset().left+$(this).outerWidth();return $("."+t).fadeIn("fast"),$("."+t).attr("data-id",t),$("."+t).css({top:e,left:a}),i.stopPropagation(),!1}),a(),$(window).resize(function(){a()});var f=$(".popup"),h=$(".js-overlay");$(".js-popup-link").on("click",function(i){$(".window_bottom").fadeOut();var t=$(this).attr("href");return $(".js-popup-link").removeClass("is-active"),$(this).addClass("is-active"),$("."+t).fadeIn(),$(h).fadeIn(),!1}),f.on("click",function(i){i.stopPropagation()}),$(".js-popup-close").on("click",function(){f.fadeOut("fast"),h.fadeOut("fast"),$(".window_bottom").fadeOut(),$(".js-popup-link").removeClass("is-active")}),$(".scroll-pane").bind("mousewheel",function(i){return i.originalEvent.wheelDelta<0&&$(this).scrollTop()+$(this).height()>=this.scrollHeight?!1:void 0}),$(".js-load-more").on("click",function(){return $(this).addClass("is-active"),!1}),$(window).load(function(){var i=$(".article__in");i.isotope({itemSelector:".article__item",masonry:{columnWidth:250,gutter:50}})})});